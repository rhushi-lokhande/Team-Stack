/// <reference path="./server.d.ts" />
'use strict';
var express = require('express');
var chalk = require('chalk');
var config = require('./config/environment');
var mongoose = require('mongoose');
mongoose.connect(config.mongo.uri, config.mongo.options);
var app = express();
var server = require('http').createServer(app);
var socket = require('socket.io')(server, { serveClient: true });
require('./config/sockets.js')(socket);
require('./config/express')(app);
require('./routes')(app);
server.listen(config.port, config.ip, function () {
    console.log(chalk.red('\nExpress server listening on port ')
        + chalk.yellow('%d')
        + chalk.red(', in ')
        + chalk.yellow('%s')
        + chalk.red(' mode.\n'), config.port, app.get('env'));
    if (config.env === 'development') {
        require('ripe').ready();
    }
});
module.exports = server;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsWUFBWSxDQUFDO0FBRWIsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2pDLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM3QixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUM3QyxJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFbkMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRXpELElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFDO0FBQ3BCLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0MsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ2pFLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBRXZDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2pDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUV6QixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRTtJQUVsQyxPQUFPLENBQUMsR0FBRyxDQUNQLEtBQUssQ0FBQyxHQUFHLENBQUMscUNBQXFDLENBQUM7VUFDOUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7VUFDbEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7VUFDbEIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7VUFDbEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFDdkIsTUFBTSxDQUFDLElBQUksRUFDWCxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUNqQixDQUFDO0lBRUYsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM1QixDQUFDO0FBRUwsQ0FBQyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9zZXJ2ZXIuZC50c1wiIC8+XG4ndXNlIHN0cmljdCc7XG5cbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIGNoYWxrID0gcmVxdWlyZSgnY2hhbGsnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZy9lbnZpcm9ubWVudCcpO1xudmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxubW9uZ29vc2UuY29ubmVjdChjb25maWcubW9uZ28udXJpLCBjb25maWcubW9uZ28ub3B0aW9ucyk7XG5cbnZhciBhcHAgPSBleHByZXNzKCk7XG52YXIgc2VydmVyID0gcmVxdWlyZSgnaHR0cCcpLmNyZWF0ZVNlcnZlcihhcHApO1xudmFyIHNvY2tldCA9IHJlcXVpcmUoJ3NvY2tldC5pbycpKHNlcnZlciwgeyBzZXJ2ZUNsaWVudDogdHJ1ZSB9KTtcbnJlcXVpcmUoJy4vY29uZmlnL3NvY2tldHMuanMnKShzb2NrZXQpO1xuXG5yZXF1aXJlKCcuL2NvbmZpZy9leHByZXNzJykoYXBwKTtcbnJlcXVpcmUoJy4vcm91dGVzJykoYXBwKTtcblxuc2VydmVyLmxpc3Rlbihjb25maWcucG9ydCwgY29uZmlnLmlwLCBmdW5jdGlvbiAoKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgY2hhbGsucmVkKCdcXG5FeHByZXNzIHNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAnKVxuICAgICAgICArIGNoYWxrLnllbGxvdygnJWQnKVxuICAgICAgICArIGNoYWxrLnJlZCgnLCBpbiAnKVxuICAgICAgICArIGNoYWxrLnllbGxvdygnJXMnKVxuICAgICAgICArIGNoYWxrLnJlZCgnIG1vZGUuXFxuJyksXG4gICAgICAgIGNvbmZpZy5wb3J0LFxuICAgICAgICBhcHAuZ2V0KCdlbnYnKVxuICAgICk7XG5cbiAgICBpZiAoY29uZmlnLmVudiA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICByZXF1aXJlKCdyaXBlJykucmVhZHkoKTtcbiAgICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlcnZlcjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
